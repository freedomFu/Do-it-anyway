**Title:** Software Security Principles, Policies, and Protection

**Author:** Mathias Payer

## 1. Introduction

读者在阅读每日新闻提要时，很可能会遇到一些与软件安全相关的故事。软件安全是一个广阔的领域，故事可能从利用易受欺骗用户安装恶意软件的恶意软件感染到利用软件漏洞自动从一个系统传播到另一个系统的蠕虫病毒。软件安全（或缺乏软件安全）是所有这些攻击的基础。

但是为什么软件安全如此困难？答案是复杂的。对于安全漏洞的防护和利用贯穿于所有抽象层面，涉及人为因素、可用性、性能、系统抽象层和经济问题。敌手只需要攻破系统最弱的一环，而防御者需要解决所有的攻击向量。此处，攻击向量指的是攻击者执行某项攻击的一个方法，即防御系统中的一个开放口，允许攻击者获得不必要的访问权限。对于攻击者来说，一个简单的问题足以让它破坏一个系统，但是防御者则需要防止所有在指定威胁模型下可能的攻击。例如，攻击者需要一个可利用的程序漏洞，而防御者则需要阻止所有问题被利用。用逻辑表达式的方法来说，满足`存在`条件比满足`任意`条件简单很多。

安全特别是系统与软件安全渗透到我们生活的各个领域。我们定期与复杂的互联软件系统进行交互。这些系统的问题或者故障允许未授权的攻击者访问我们的数据或者允许他们通过安装恶意软件来提升自身的权限。安全影响每个人的生活，用户做出安全的决定是至关重要的。为了管理系统系统，多个抽象层的人员必须协同工作：经理Manager，管理员Administrator，开发者Developer和安全研究人员Security researchers。经理负责决定向安全方案投资多少钱以及需要购买什么安全产品。管理员必须仔细考虑谁获得了什么权限。开发人员必须设计和构建安全系统来保证在特定的访问测量下数据的完整性，机密性和可用性。安全研究人员找到系统中的问题，并且提出针对弱点、漏洞和系统攻击向量的缓解措施。

安全是通过数据和资源的防御机制的策略的应用和执行。安全策略指定了我们需要执行的内容。防御机制指定了我们需要如何执行策略，即策略的实现或实例。例如，`Data Execution Prevention`是通过保证进程地址空间的每一页物理内存是可写或可执行的，但不能两者兼得，进而执行`Code Integrity`策略。软件安全是一个专注于测试、评估、改善、执行和证明软件安全属性的一个领域。

为了构建一个软件安全的基础，本书首先介绍和定义基础的安全属性。这些属性包括机密性、完整性和可用性，可以定义哪些信息需要被保护；隔离，一种通过将系统或者数据分割成小的，相对独立的部分而实现的防御方法；威胁模型，用于推理潜在攻击和行为；程序漏洞和安全漏洞的区别。

在后续讨论安全软件生命周期的过程中，重点放在对于软件需求规范和功能设计的明确定义，以便后续完成最佳实现的实践，持续集成，软件测试和安全软件更新。在此过程中，关注的重点不再是软件工程的一般过程，而是从安全角度审视这些过程。

内存安全和类型安全是确保软件语义推理的核心安全策略。只有这两个安全原则得到保证时，我们才可以按照实现细节推理软件的正确性。任何违背这些策略的行为，都可能会导致软件出现异常，并允许攻击者破坏程序的内部状态并执行所谓的异常的机器`werid machine`。异常的机器不再按照预期的状态转换（即源代码）执行。异常机器的执行过程总是会涉及某种违背核心安全策略的行为，使得跳出程序控制流和数据流的约束。而CPU只负责执行底层命令。当数据被破坏时，编译器和运行时系统的上层假设不再成立，因此原本基于这些假设的检查也不再成立。

攻击向量这一章主要讨论不同类型的攻击，包括混淆代理攻击，滥用代理的API来出发隔离区来泄露信息或者提取；控制流劫持攻击，利用内存或者类型安全问题重定向应用控制流到攻击者控制的未知。代码注入和代码重用会重写程序并将攻击者控制的代码引入到程序的地址空间。

防御策略章节列举了不同保护应用程序免受软件安全漏洞影响的方法。由于新的源代码的编写速度远远超过测试速度，即使开发和测试人员全力以赴，一些可被利用的程序漏洞总是会存在。作为最后一道防线，缓解措施会通过牺牲一定的可用性以保证系统的完整性。缓解措施可以通过程序中额外的指令检测到策略违背并防止未知或者未修复的问题。在开发过程中，防御策略专注于不同的方法来验证程序的功能正确性并通过不同的测试策略测试特定的软件问题。消毒器Sanitizers可以在检测到策略违背时立即终止程序以在测试过程中帮助暴露程序的软件漏洞。

后续的一组案例学习从软件和系统安全的角度讨论了浏览器安全、网络安全和移动安全。

受众：理解软件安全现状，设计安全软件、编写安全代码并不断保证底层系统安全的开发人员，更多提供信息源而非安全研究。

`Enjoy the read and hack the planet.`

## 2. Software and System Security Principles 

软件安全的目的是允许特定用户使用软件，但是阻止未授权用户的使用。任何意外的使用都可能由于对预定资源的非定义使用都可能造成危害。




